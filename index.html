<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VitalTrack — Signos Vitales</title>

  <!-- Import map + CDN libs -->
  <script type="importmap">
  {
    "imports": {
      "chart.js": "https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"
    }
  }
  </script>

  <link rel="stylesheet" href="styles.css" />
  <script defer src="app.js"></script>
</head>
<body>
  <div class="app">
    <header>
      <h1>LÚMINA Check</h1>
      <div style="display:flex;gap:8px;align-items:center">
        <a id="luminaWeb" class="icon-btn" href="https://sites.google.com/view/luminamedscz" target="_blank" rel="noopener">LÚMINA web</a>
        <button id="profileBtn" class="icon-btn" title="Perfil">⚙️</button>
      </div>
    </header>

    <main>
      <section class="card" id="inputCard" aria-labelledby="inputTitle">
        <h2 id="inputTitle">Registra tus signos vitales</h2>
        <form id="vitalsForm" autocomplete="off">
          <div class="row">
            <label>Pulso (lpm)
              <input name="heartRate" type="number" min="20" max="250" required />
            </label>
            <label>Frecuencia respiratoria (rpm)
              <input name="respRate" type="number" min="5" max="60" required />
            </label>
          </div>
          <div class="row">
            <label>Presión sistólica (mmHg)
              <input name="sys" type="number" min="40" max="250" required />
            </label>
            <label>Presión diastólica (mmHg)
              <input name="dia" type="number" min="30" max="150" required />
            </label>
          </div>
          <div class="row">
            <label>Temperatura (°C)
              <input name="temp" type="number" step="0.1" min="30" max="43" required />
            </label>
            <label>SpO₂ (%)
              <input name="spo2" type="number" min="50" max="100" required />
            </label>
          </div>

          <div class="actions">
            <button type="submit" class="primary">Guardar</button>
            <button type="button" id="quickNormal" class="muted">Rellenar ejemplo</button>
            <button type="button" id="clearForm" class="muted">Borrar</button>
          </div>
        </form>
      </section>

      <section class="card" id="resultsCard" aria-labelledby="resultsTitle">
        <h2 id="resultsTitle">Resultados</h2>
        <div id="resultsList" class="results-list">
          <!-- dynamic results -->
        </div>
        <p class="advice" id="globalAdvice"></p>
      </section>

      <section class="card" id="historyCard" aria-labelledby="historyTitle">
        <h2 id="historyTitle">Historial</h2>
        <div class="history-controls">
          <button id="exportCsv" class="icon-btn">⤓ Exportar CSV</button>
          <button id="clearHistory" class="muted">Limpiar historial</button>
        </div>
        <canvas id="historyChart" height="160" aria-label="Gráfico de historial"></canvas>
        <ul id="historyList" class="history-list">
          <!-- entries -->
        </ul>
      </section>

      <section class="card" id="learnCard" aria-labelledby="learnTitle">
        <h2 id="learnTitle">Aprende</h2>
        <p>Consejos rápidos: medir pulso en reposo, temperatura oral/axilar, y cómo colocar el oxímetro. Si algún valor es anormal, considere consultar con un profesional de salud.</p>
        <details>
          <summary>Rangos de referencia (aplicados según edad/sexo)</summary>
          <ul id="referenceList">
            <!-- dynamic -->
          </ul>
        </details>
      </section>
    </main>

    <footer>
      <small>LÚMINA Check — herramienta informativa, no sustituye atención médica.</small>
    </footer>
  </div>

  <!-- Profile modal -->
  <div id="profileModal" class="modal" aria-hidden="true">
    <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="profileTitle">
      <h3 id="profileTitle">Perfil</h3>
      <form id="profileForm">
        <label>Edad
          <input name="age" type="number" min="0" max="120" required />
        </label>
        <label>Sexo
          <select name="sex" required>
            <option value="female">Femenino</option>
            <option value="male">Masculino</option>
            <option value="other">Otro</option>
          </select>
        </label>
        <div class="actions">
          <button type="submit" class="primary">Guardar perfil</button>
          <button type="button" id="closeProfile" class="muted">Cerrar</button>
        </div>
      </form>
    </div>
  </div>

</body>
</html>